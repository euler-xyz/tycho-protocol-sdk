# Name of the substreams config file in your substreams module. Usually "./substreams.yaml"
substreams_yaml_path: ./substreams.yaml
# Name of the adapter contract, usually: ProtocolSwapAdapter"
adapter_contract: "EulerSwapAdapter"
# Constructor signature of the Adapter contract"
adapter_build_signature: "constructor(address,address)"
# A comma separated list of args to be passed to the contructor of the Adapter contract"
adapter_build_args: "0xa4891c18f036f14d7975b0869d77ea7c7032e0ff,0xbc1b9f90b9d1de7ba9012e3b1ebc846aa510ca31"
# Whether or not the testing script should skip checking balances of the protocol components.
# If set to `true` please always add a reason why it's skipped.
skip_balance_check: true
# A list of accounts that need to be indexed to run the tests properly.
# Usually used when there is a global component required by all pools and created before the tested range of blocks. For example a factory or a vault.
# Please note that this component needs to be indexed by your substreams module, this feature is only for testing purpose.
# Also please always add a reason why this account is needed for your tests.
# This will be applied to each test.
initialized_accounts:
  - "0x0c9a3dd6b8f28529d72d7f9ce918d493519ee383" # This is the EVC address
  - "0xba4003cf4f0f0248b5195bc004782ce0481eed17" # EulerSwap implementation
  - "0xbc1b9f90b9d1de7ba9012e3b1ebc846aa510ca31" # EulerSwapPerihpery
  - "0x29a56a1b8214d9cf7c5561811750d5cbdb45cc8e" # EVK: GenericFactory contract
  - "0x8ff1c814719096b61abf00bb46ead0c9a529dd7d" # EVK: EVault implementation
  - "0xb4ad4d9c02c01b01cf586c16f01c58c73c7f0188" # EVK: Vault module implementation
  - "0x639156f8feb0cd88205e4861a0224ec169605acf" # EVK: Borrowing module implementation
  - "0xa61f5016f2cd5cec12d091f871fce1e1df5f0b67" # EVK: Governance module implementation
  # - "0xb896f28969a04202564e4eaa494a7253e0e6f3dc" # IRMLinearKink
  # - "0x1a34934a091fb8c030468bdf99d695fa3264ee30" # vault-0/1 dToken
  # - "0x36f8c4b4c6a638bb38f49285c08e282c99db05fb" # EulerRouter
  # - "0x587cabe0521f5065b561a6e68c25f338ed037ff9" # USDT ChainlinkOracle Adapter
  # - "0x3e7d1eab13ad0104d2750b8863b489d65364e32d" # Chainlink contracts: EACAggregatorProxy
  # - "0x0d5f4aadf3fde31bbb55db5f42c080f18ad54df5" # Chainlink contracts: AccessControlledOCR2Aggregator
  # - "0x6213f24332d35519039f2afa7e3bffe105a37d3f" # USDC ChainlinkOracle Adapter
  # - "0x8fffffd4afb6115b954bd326cbe7b4ba576818f6" # Chainlink contracts: EACAggregatorProxy
  # - "0xc9e1a09622afdb659913fefe800feae5dbbfe9d7" # Chainlink contracts: AccessControlledOCR2Aggregator
# A list of protocol types names created by your Substreams module.
protocol_type_names:
  - "eulerswap"
# A list of tests.
tests:
  # Name of the test
  - name: test_pool_creation
    # Indexed block range
    start_block: 22388268
    stop_block: 22388480
    # Same as global `initialized_accounts` but only scoped to this test.
    initialized_accounts:
      - "0xa66957e58b60d6b92b850c8773a9ff9b0ba96a65" # This is the USDC vault in Euler lending protocol that will hold the USDC for the pool
      - "0x4212e01c7c8e1c21dea6030c74ae2084f5337bd1" # This is the USDT vault in Euler lending protocol that will hold the USDT for the pool
    # A list of expected component indexed in the block range. Each component must match perfectly the `ProtocolComponent` indexed by your subtreams module.
    expected_components:
      - id: "0x93839ae283b2a827210586deba7b1de50a122888"
        tokens:
          - "0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"
          - "0xdac17f958d2ee523a2206206994597c13d831ec7"
        static_attributes:
          pool_type: "0x45756c657253776170"
          euler_account: "0x3b64d01ac88d41fd6e5717d82de7b980c1d88727"
          fee: "0x0"
          protocolFee: "0x0"
          protocolFeeRecipient: "0x0000000000000000000000000000000000000000"
          reserves: "0x5b2230783362396163613030222c2230783362396163613030225d"
          prices: "0x5b22307830646530623662336137363430303030222c22307830646530623662336137363430303030225d"
          concentrations: "0x5b22307830643736323164633538323130303030222c22307830643736323164633538323130303030225d"
          manual_updates: "0x01"
        creation_tx: "0x82c99a8a3a83c547cfd22948470b76bb67b860cfc4aef0d17b374799c629e9fe"
        # Whether or not the script should skip trying to simulate a swap on this component.
        # If set to `true` please always add a reason why it's skipped.
        skip_simulation: false
  # - name: test_something_else
  #   start_block: 123
  #   stop_block: 456
  #   expected_components:
  #     - id: "0xdc24316b9ae028f1497c275eb9192a3ea0f67022"
  #       tokens:
  #         - "0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"
  #         - "0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84"
  #       static_attributes: null
  #       creation_tx: "0xfac67ecbd423a5b915deff06045ec9343568edaec34ae95c43d35f2c018afdaa"
  #       skip_simulation: true # If true, always add a reason
